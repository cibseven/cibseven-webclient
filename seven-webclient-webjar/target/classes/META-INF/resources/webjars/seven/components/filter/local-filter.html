<div class="form-group">
	<div class="input-group">
		<select class="form-control form-control-sm border-light" v-model="selectedFilter" @change="setFilter($event.target.value)">
			<option selected value="default">{{ $t('seven.allTasks') }}</option>
			<option v-for="item in filters" v-if="item.name != 'default'" :value="item.name">{{ item.name }}</option>
		</select>
		<div class="input-group-append border-light">
			<button v-if="selectedFilter !== 'default'" class="btn btn-outline-secondary btn-sm border-light" 
			@click="showFilterDialog('edit')" type="button"><span class="mdi mdi-pencil"></span></button>
			<button v-if="selectedFilter !== 'default'" class="btn btn-outline-secondary btn-sm border-light" 
			@click="$refs.confirmDeleteFilter.show()" type="button"><span class="mdi mdi-close"></span></button>
			<button class="btn btn-outline-secondary btn-sm border-light" 
			@click="showFilterDialog('create')" type="button"><span class="mdi mdi-plus"></span></button>
		</div>
	</div>
	
	<b-modal size="lg" scrollable ref="createFilter" :title="$t('nav-bar.filters.addFilter')" @shown="$emit('display-popover', false)" @hidden="$emit('display-popover', true)">
		<b-form-group label-size="sm" :label-cols="2" :label="$t('nav-bar.filters.filterNameLabel')" :invalid-feedback="$t('nav-bar.filters.filterExists')">
			<b-form-input size="sm" v-model="filterData.name" :placeholder="$t('nav-bar.filters.filterNamePlaceholder')" :state="existFilter ? false : null"></b-form-input>
		</b-form-group>
		<hr>
		<b-form-group :label-cols="12" label-class="mb-3" label-size="sm" :label="$t('nav-bar.filters.selectedCriteria')">
			<div class="container text-center">
				<div class="row text-center px-3 mb-2 align-items-center" v-for="(keyFilter, index) in filterData.keys">
					<b-form-select style="background-image: none" class="col-5" size="sm" @change="setFilterKeys($event, index)" v-model="keyFilter.key" :options="filterOptions">
						<template v-slot:first>
							<b-form-select-option :value="null" disabled>-- {{ $t('nav-bar.filters.selectProperty') }} --</b-form-select-option>
						</template>
					</b-form-select>
					<div class="col-6 input-group">
						<filterable-select v-if="$store.state.user.searchUsers.length > 1 && keyFilter.type === 'filterable'" class="w-100" :placeholder="$t('nav-bar.filters.insertValue')"
						v-model="keyFilter.value" :elements="$store.state.user.searchUsers" noInvalidValues/>
						<b-form-input v-else size="sm" v-model="keyFilter.value" :placeholder="$t('nav-bar.filters.insertValue')"></b-form-input>
					</div>
					<div class="col-1">
						<button :disabled="filterData.keys.length === 1" class="btn btn-outline-primary border-0 py-0" @click="deleteKey(index)" :title="$t('nav-bar.filters.deleteCriteria')"> <span class="mdi mdi-18px mdi-close"></span></button>
					</div>
				</div>
			</div>
		</b-form-group>
		<hr>
		<b-button @click="addCriteria" size="sm" class="mdi mdi-plus" variant="outline-primary">{{ $t('nav-bar.filters.addCriteria') }}</b-button>
	   	<template v-slot:modal-footer>
			<b-button @click="createFilter" :disabled="checkValidity" variant="outline-primary">{{ mode === 'create' ? $t('nav-bar.filters.addFilter') : $t('nav-bar.filters.updateFilter') }}</b-button>
			<b-button @click="$refs.createFilter.hide()" class="text-secondary" variant="link">{{ $t('confirm.cancel') }}</b-button>
		</template>
	</b-modal>	
	
	<confirm ref="confirmDeleteFilter" @ok="deleteFilter()">
		<span v-html="$t('confirm.deleteFilter', [selectedFilter])"></span>
	</confirm>
</div>