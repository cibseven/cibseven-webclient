<div class="h-100 d-flex flex-column">
	<task-popper ref="importPopper"></task-popper>
	<div class="container-fluid overflow-auto h-100 pt-2">		
		<div v-if="selectedInstance">
			<sidebar-element-group v-for="variable in variables" v-model="variable.valueInfo.filename || variable.value" 
			icon="mdi-clipboard-text" :label="variable.name" :textareaEval="true" :disabled="!variable.modify" :key="variable.id">
				<b-button v-if="variable.type === 'File'" :title="$t('process-instance.download')" size="sm" class="py-0" variant="outline-secondary" @click="downloadFile(variable)">
				<span class="mdi mdi-16px mdi-dark mdi-download"></span></b-button>
				<template v-if="selectedInstance && selectedInstance.state === 'ACTIVE'">
					<b-button v-if="variable.type === 'File'" size="sm" class="py-0" variant="outline-secondary" @click="selectedVariable = variable; $refs.uploadFile.show()">
					<span class="mdi mdi-16px mdi-dark mdi-upload" :title="$t('process-instance.upload')"></span></b-button>
					<b-button v-if="!['File', 'Null'].includes(variable.type)" size="sm" class="py-0" variant="outline-secondary" @click="saveOrEditVariable(variable)">
					<span class="mdi mdi-16px mdi-dark" :class="variable.modify ? 'mdi-content-save' : 'mdi-square-edit-outline'" :title="variable.modify ? $t('process-instance.save') : $t('process-instance.edit')"></span></b-button>
				</template>
			</sidebar-element-group>
		</div>		
	</div>
	<b-modal @hide="file = null" ref="uploadFile" :title="$t('process-instance.upload')">
		<div class="container-fluid">
			<b-form-file placeholder="" :browse-text="$t('process-instance.selectFile')" v-model="file"></b-form-file>
		</div>
		<template v-slot:modal-footer>
			<b-button v-t="'confirm.cancel'" @click="$refs.uploadFile.hide()"></b-button>
			<b-button :disabled="!file" v-t="'process-instance.upload'" variant="primary" @click="uploadFile(); $refs.uploadFile.hide()"></b-button>
		</template>
	</b-modal>
</div>
