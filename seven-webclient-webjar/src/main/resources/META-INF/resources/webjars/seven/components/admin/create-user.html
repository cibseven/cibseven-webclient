<div class="d-flex flex-column bg-light" :style="{ height: 'calc(100% - 55px)' }">
	<div class="container overflow-auto bg-white shadow" style="margin-top: 24px">
		<div class="row">
			<div class="col-12 p-0">
				<b-card class="border-0 p-5" :title="$t('admin.users.create')">
					<b-card-text class="border-top pt-4 mt-3">
						<b-form @submit="onSubmit($event)">
							<b-form-group labels-cols-lg="2" :label="$t('admin.users.account')" label-size="lg" label-class="h6 pt-0 mb-4" class="m-0">
								<b-form-group :label="$t('admin.users.id') + '*'" label-cols-sm="2" 
									label-align-sm="left" label-class="pb-4" :invalid-feedback="$t('errors.invalid')">
									<b-form-input v-model="profile.id" :state="notEmpty(profile.id) && !userIdError" required></b-form-input>
								</b-form-group>
								<b-form-group label-cols-sm="2" label-align-sm="left">
									<template v-slot:label>
										{{ $t('admin.users.password') + '*' }}
										<span v-if="$root.config.admin.passwordPolicyEnabled" ref="passwordHelper" style="cursor: pointer" class="mdi mdi-help-circle" :class="passwordPolicyError ? 'text-danger' : 'text-secondary'"></span>
									</template>
									<b-form-input :type="fieldType(showPassword)" ref="pass" v-model="credentials.password" :state="notEmpty(credentials.password) && !passwordPolicyError" required>
										<template v-slot:append>
									        <button class="btn btn-outline-secondary rounded-start-0" type="button" @click="showPassword = !showPassword">
									            <span :class="showPassword ? 'mdi mdi-eye-off' : 'mdi mdi-eye'"></span>
									        </button>
									    </template>
									</b-form-input>
									<div v-if="passwordPolicyError" class="invalid-feedback">{{ $t('errors.PasswordPolicyException') }}</div>
								</b-form-group>
								<b-form-group :label="$t('admin.users.passwordRepeat') + '*'" label-cols-sm="2" label-align-sm="left" :invalid-feedback="$t('errors.passwordDoNotMatch')">
									<b-form-input :type="fieldType(showPassRepeat)" ref="passRepeat" v-model="passwordRepeat" :state="same(credentials.password, passwordRepeat)" required>									
										<template v-slot:append>
									        <button class="btn btn-outline-secondary rounded-start-0" type="button" @click="showPassRepeat = !showPassRepeat">
									            <span :class="showPassRepeat ? 'mdi mdi-eye-off' : 'mdi mdi-eye'"></span>
									        </button>
									    </template>
									</b-form-input>
								</b-form-group>
								
								<b-form-group :label="$t('admin.users.profile')" label-size="lg" label-class="h6 mt-4"></b-form-group>
								
								<b-form-group :label="$t('admin.users.firstName') + '*'" label-cols-sm="2" label-align-sm="left" label-class="pb-4" :invalid-feedback="$t('errors.invalid')">
									<b-form-input v-model="profile.firstName" :state="notEmpty(profile.firstName)" required></b-form-input>
								</b-form-group>						
								<b-form-group :label="$t('admin.users.lastName') + '*'" label-cols-sm="2" label-align-sm="left" label-class="pb-4" :invalid-feedback="$t('errors.invalid')">
									<b-form-input v-model="profile.lastName" :state="notEmpty(profile.lastName)" required></b-form-input>
								</b-form-group>
								<b-form-group :label="$t('admin.users.email')" label-cols-sm="2" label-align-sm="left" :invalid-feedback="$t('errors.invalid')">
									<b-form-input v-model="profile.email" type="email" autocomplete="email" :state="isValidEmail(profile.email)"></b-form-input>
								</b-form-group>
								<div class="float-end mt-4">
									<b-button type="reset" @click="onReset()" variant="link">{{ $t('admin.users.cancel') }}</b-button>
									<b-button type="submit" variant="secondary">{{ $t('admin.users.create') }}</b-button>
								</div>						
							</b-form-group>
						</b-form>
					</b-card-text>
				</b-card>
			 </div>
	 	</div>
	</div>
	<b-popover :target="() => $refs.passwordHelper" triggers="hover">
		<h6>{{ $t('password.policy.title') }}</h6>
		<div>{{ $t('password.policy.header') }}</div>
		<ul>
			<li v-for="item in $t('password.policy.items')">{{ item }}</li>
		</ul>
  	</b-popover>
	<success v-if="profile.id" top="0" style="z-index: 1031" ref="userCreated">{{ $t('admin.users.userCreatedMessage', [profile.id]) }}</success>
</div>
