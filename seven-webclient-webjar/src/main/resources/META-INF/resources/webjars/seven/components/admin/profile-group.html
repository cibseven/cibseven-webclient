<sidebars ref="sidebars" header-margin="55px" v-model:left-open="leftOpen" 
	:left-caption="$t('admin.groups.title') + ' - ' + group.id" :left-size="[12, 6, 4, 3, 2]">
	<template v-slot:left>
		<b-list-group>
			<b-list-group-item class="border-0 px-3 py-2" :active="$route.query.tab === 'information'" exact :to="'?tab=information'">
				<span> {{ $t('admin.groups.information') }}</span>
			</b-list-group-item>
			<b-list-group-item class="border-0 px-3 py-2" :active="$route.query.tab === 'users'" exact :to="'?tab=users'">
				<span> {{ $t('admin.groups.users') }}</span>
			</b-list-group-item>				
		</b-list-group>
	</template>
											
	<transition name="slide-in" mode="out-in">
		<div  v-if="group.id" class="d-flex flex-column h-100 bg-light">
			<b-button variant="light" style="min-height: 35px; line-height: 20px;" :block="true" class="rounded-0 border-bottom text-start" href="#/seven/auth/admin/groups">
		   		<span class="mdi mdi-arrow-left me-2 float-left"></span>
		   			{{ $t('admin.groups.title') }}
   			</b-button>
			<div class="container-fluid overflow-auto">
				<div v-if="$route.query.tab === 'information'" class="row">
					<div class="col-sm-12 col-md-12 col-lg-8 col-xl-6 p-4">
						<b-card class="border-0 p-5 shadow" :title="$t('admin.groups.editMessage', [group.name])">
							<b-card-text class="border-top border-top pt-4 mt-3">
								<cib-form @submitted="update()">									
									<b-form-group :label="$t('admin.groups.name') + '*'" label-cols-sm="6" label-cols-md="6" label-cols-lg="4" label-align-sm="left" label-class="pb-4"
										:invalid-feedback="$t('errors.invalid')">
										<b-form-input v-model="group.name" @update="dirty=true" :state="notEmpty(group.name)" required></b-form-input>
									</b-form-group>						
									<b-form-group :label="$t('admin.groups.type')" label-cols-sm="6" label-cols-md="6" label-cols-lg="4" label-align-sm="left" label-class="pb-4">
										<b-form-input v-model="group.type" @update="dirty = true"></b-form-input>
									</b-form-group>
									<div class="float-right">
										<b-button v-if="$root.config.userProvider === 'de.cib.cibflow.auth.CamundaUserProvider'" type="submit" variant="secondary" :disabled="!dirty" >{{ $t('admin.groups.update') }}</b-button>
									</div>
									<div class="float-left" v-if="$root.config.userProvider === 'de.cib.cibflow.auth.CamundaUserProvider'">
										<b-button variant="warning" @click="$refs.deleteModal.show()">{{ $t('admin.groups.deleteGroup') }}</b-button>
									</div>	
								</cib-form>
							</b-card-text>
						</b-card>
					 </div>
			 	</div>
				<div v-if="$route.query.tab === 'users'" class="row">
					<div class="col-12">
						<b-card class="border-0 bg-light">
							<b-form-group labels-cols-lg="2" label-size="lg" label-class="font-weight-bold pt-0" 
								:label="$t('admin.groups.editMessage', [group.name])">
							</b-form-group>
							<div class="row py-3">
								<div class="col-9">
									<h5>{{ $t('admin.groups.user.title') }}</h5>
								</div>
					 		</div>
							<div v-if="users" class="container-fluid overflow-auto bg-white shadow">											
								<flow-table :items="users" primary-key="id" striped
								 	prefix="admin.users." :fields="[{label: 'id', key: 'id', class: 'col-md-3 col-sm-3', tdClass: 'border-end py-2' },
										{label: 'firstName', key: 'firstName', class: 'col-md-3 col-sm-3', tdClass: 'border-end py-2' },
										{label: 'lastName', key: 'lastName', class: 'col-md-3 col-sm-3', tdClass: 'border-end py-2' },
										{label: 'email', key: 'email', class: 'col-md-3 col-sm-3', tdClass: 'py-2' }]"
									@contextmenu="focusedUser = $event" @mouseenter="focusedUser = $event" @mouseleave="focusedUser = null">
								</flow-table>
						 	</div>							 		
						</b-card>
					</div>		
				</div>
			</div>
			<b-modal ref="deleteModal" :title="$t('confirm.title')">
				<div class="container-fluid">
					<div class="row align-items-center">
						<div class="col-2">
							<span class="mdi-36px mdi mdi-alert-outline text-warning me-3"></span>
						</div>	
						<div class="col-10">
							<p>{{ $t('admin.groups.confirmDelete') }}</p>
							<strong>{{ $t('admin.groups.id') }}:</strong> {{ group.id }} <br>
							<strong>{{ $t('admin.groups.name') }}:</strong> {{ group.name }}<br>
							<strong>{{ $t('admin.groups.type') }}:</strong> {{ group.type }}<br>
						</div>			
					</div>
				</div>
				<template v-slot:modal-footer>
					<b-button v-t="'confirm.ok'" variant="primary" 
						@click="deleteGroup(); $refs.deleteModal.hide()"></b-button>				
					<b-button v-t="'confirm.cancel'" @click="$refs.deleteModal.hide()"></b-button>
				</template>
			</b-modal>
		</div>
	</transition>
	<success ref="updateGroup" top="0" style="z-index: 1031">{{ $t('admin.groups.updateGroupMessage', [group.id]) }}</success>
	<success ref="deleteGroup" top="0" style="z-index: 1031">{{ $t('admin.groups.deleteGroupMessage', [group.id]) }}</success>
</sidebars>
