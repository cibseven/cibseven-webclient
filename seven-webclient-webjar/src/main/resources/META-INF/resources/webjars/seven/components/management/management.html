<div class="d-flex flex-column">
	<div class="d-flex ps-3 py-2">
		<b-button :title="$t('start.admin')" variant="outline-secondary" href="#/flow/auth/process-management" class="mdi mdi-18px mdi-arrow-left border-0"></b-button>
		<h4 class="ps-1 m-0 align-items-center d-flex" :title="processName" style="border-width: 3px !important">{{ processName }}</h4>
		<b-button :disabled="!instances || instances.length === 0" :title="$t('process.exportInstances')" variant="outline-secondary" @click="exportCSV()" 
			class="ms-auto me-3 mdi mdi-18px mdi-download-outline border-0"></b-button>
	</div>
	<sidebars-flow ref="sidebars" class="border-top overflow-auto" v-model:left-open="leftOpen" :left-caption="shortendLeftCaption">
		<template v-slot:left>
			<process-details-sidebar ref="navbar" v-if="instances" :process="process" :selected-instance="selectedInstance" :selected-task="task"
				@load-version-process="loadVersionProcess($event)" @load-instances="loadInstances()"
				:instances="instances"></process-details-sidebar>
		</template>
		<transition name="slide-in" mode="out-in">
			<process ref="process" v-if="instances && !selectedInstance" :activity-id="activityId" :loading="loading" :process="process" :instances="instances" :activity-instance="activityInstance" :first-result="firstResult" :max-results="maxResults" @show-more="showMore()"
			 :activity-instance-history="activityInstanceHistory" @activity-id="filterByActivityId($event)" @instance-deleted="clearInstance()" @instance-selected="setSelectedInstance($event)" @task-selected="setSelectedTask($event)" @filter-instances="filterInstances($event)"
			 @open-subprocess="openSubprocess($event)" @update-items="updateItems"
			 ></process>
		</transition>
		<transition name="slide-in" mode="out-in">
			<process-variables-table ref="navbar-variables" v-if="selectedInstance" :process="process" :activity-instance="activityInstance" :activity-instance-history="activityInstanceHistory" @open-subprocess="openSubprocess($event)"
			:selected-instance="selectedInstance" @clear-state="setSelectedInstance({ selectedInstance: null })" @task-selected="setSelectedTask($event)" @unselect-instance="selectedInstance = null"></process-variables-table>
		</transition>
	</sidebars-flow>
	<task-popper ref="importPopper"></task-popper>
</div>