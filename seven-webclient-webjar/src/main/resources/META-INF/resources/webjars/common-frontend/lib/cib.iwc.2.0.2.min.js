(function(b){b.CibMasterApplicationFunctions=function(a){this._master=a;this.getMaster=function(){return this._master};this.registerOpenApplicationCallback=function(a){this.getMaster().registerFunction("openApplication",a)};this.registerCloseApplicationCallback=function(a){this.getMaster().registerFunction("closeApplication",a)};this.sendCloseNotification=function(a){this._master.callFunction("closeNotification",{appId:a})}}})(window);
(function(b){b.CibMasterCommonFunctions=function(a){this._master=a;this.getMaster=function(){return this._master};this.registerStartParameterCallback=function(a){this.getMaster().registerFunction("getStartParameters",a)};this.registerSetBusyCallback=function(a){this.getMaster().registerFunction("setBusy",a)};this.registerFireDataDirtyCallback=function(a){this.getMaster().registerFunction("fireDataDirty",a)};this.registerTerminateCallback=function(a){this.getMaster().registerFunction("terminate",a)};
this.registerOpenApplicationCallback=function(a){this.getMaster().registerFunction("openApplication",a)};this.lock=function(){this.getMaster().callFunction("lock",{},null)};this.unlock=function(){this.getMaster().callFunction("unlock",{},null)};this.logout=function(){this.getMaster().callFunction("logout",{},null)};this.resize=function(a,b){a={width:a,height:b};this.getMaster().callFunction("resize",a,null)};this.showMessage=function(a){a={messageText:a};this.getMaster().callFunction("showMessage",
a,null)}}})(window);
(function(b){b.CibIwcMaster=function(a){this._cId=a;this._channel="cibiwc_clientchan#"+a;this._domElement=this._type=this._win=this._name=void 0;this._isLoaded=!1;this._functionNotFoundHandler=this._clientInfo=void 0;this._msgHandler=new b.CibIwcMessaging;this._msgHandler.setClientId(this._cId);this._msgHandler.setMessageType(this._channel);var c=this;this._msgHandler.registerFunction("iwc.onSlaveLoaded",function(){c._onLoadCallback&&c._onLoadCallback()})};b.CibIwcMaster.prototype.setLoadCallback=function(a){this._onLoadCallback=
a};b.CibIwcMaster.prototype.getMessageHandler=function(){return this._msgHandler};b.CibIwcMaster.prototype.callFunction=function(a,c,b){this._msgHandler.call(a,c,b)};b.CibIwcMaster.prototype.registerFunction=function(a,c,b){this._msgHandler.registerFunction(a,c,b)};b.CibIwcMaster.prototype.openURLInFrame=function(a,c){if(a="string"===typeof a?document.querySelector(a):void 0!==window.jQuery&&a instanceof jQuery?a[0]:a){var b=this;a.addEventListener("load",function(a){b._onLoad(a.target.contentWindow,
"iframe")});a.setAttribute("src",c);a.setAttribute("_cid",this._cId);this._domElement=a;this._type="iframe";c=a.contentWindow;"undefined"!==typeof c&&this._onLoad(c,this._type)}};b.CibIwcMaster.prototype.lookupWindow=function(){if(!this._win){var a=this._domElement?this._domElement.contentWindow:null;a&&this._onLoad(a,this._type)}return this._win};b.CibIwcMaster.prototype.openURLInNewWindow=function(a){this._win&&1!=this._win.closed?(window.console&&window.console.debug&&window.console.debug("Window already open, focusing "+
this._win),this._win.focus()):this._isLoaded||(a=window.open(a),this._onLoad(a,"externalWindow"))};b.CibIwcMaster.prototype._onLoad=function(a,c){this._isLoaded||(this._isLoaded=!0,this._win=a,this._type=c,a=this.getMessageHandler(),a.setWindow(this._win),a.init())};b.CibIwcMaster.prototype.hasPendingServiceCall=function(a){return this._msgHandler.hasPendingServiceCall(a)};b.CibIwcMaster.prototype.sendServiceCallSuccess=function(a,c){this._msgHandler.sendServiceCallSuccess(a,c)};b.CibIwcMaster.prototype.sendServiceCallError=
function(a,c){this._msgHandler.sendServiceCallError(a,c)};b.CibIwcMaster.prototype.disconnect=function(){this._msgHandler.disconnect();this._isLoaded=!1;this._clientInfo=this._domElement=this._type=this._win=this._name=void 0};b.CibIwcMaster.prototype.onClientConnected=function(a){this._clientInfo=a};b.CibIwcMaster.prototype.isClientConnected=function(){return"undefined"!==typeof this._clientInfo};b.CibIwcMaster.prototype.getClientId=function(){return this._cId}})(window);
(function(b){b.CibIwcMasterController=function(a){this._clients=[];this._msgHandler=new b.CibIwcMessaging("cib.iwc.technicalcall");this._slave=this._slaveInitCallback=this._masterLoadCallback=null;this._urlParams={};this._defaultIWCMode=a;var c=this;(window.onpopstate=function(){var a,b=/\+/g,f=/([^&=]+)=?([^&]*)/g,g=window.location.search.substring(1);for(c.urlParams={};a=f.exec(g);)c._urlParams[decodeURIComponent(a[1].replace(b," "))]=decodeURIComponent(a[2].replace(b," "))})()};b.CibIwcMasterController.prototype.getMode=
function(){return"string"===typeof this._urlParams.iwc_mode?this._urlParams.iwc_mode:this._defaultIWCMode};b.CibIwcMasterController.prototype._createClientId=function(){return function(){function a(a){var c=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+c.substr(0,4)+"-"+c.substr(4,4):c}return a()+a(!0)+a(!0)+a()}()};b.CibIwcMasterController.prototype._msgIdRequest=function(a,c){window.console&&window.console.debug&&window.console.debug("handling client request",a,c);c=c.source;
for(var b=0;b<this._clients.length;++b){var d=this._clients[b],f=d.lookupWindow();null!=f&&"undefined"!==typeof f||this._log("Window of "+d._cId+" not yet initialized.");if(f==c){this._log("Got id request from window of "+d._cId+" "+JSON.stringify(a));if("function"===typeof d.onClientConnected)d.onClientConnected(a);else d._clientInfo=a;return{clientId:d._cId,channel:d._channel,CIB_iwc_version:"0.1"}}}throw"Source window not recognized, was the Slave created by this master?";};b.CibIwcMasterController.prototype.disconnectMaster=
function(a){var c=this.getMaster(a);c&&(c.disconnect(),window.console&&window.console.debug&&window.console.debug("Successfully disconnected master",a))};b.CibIwcMasterController.prototype.removeMaster=function(a){for(var c=0;c<this._clients.length;c++)if(this._clients[c]._cId==a){this._clients.splice(c,1);break}};b.CibIwcMasterController.prototype.getMaster=function(a){for(var c=0;c<this._clients.length;c++){var b=this._clients[c];if(b._cId==a)return b}return null};b.CibIwcMasterController.prototype.listMasters=
function(a){return this._clients};b.CibIwcMasterController.prototype.createMaster=function(){var a=this._createClientId(),a=new b.CibIwcMaster(a);this._onClientLoad(a);this._clients.push(a);return a};b.CibIwcMasterController.prototype._onClientLoad=function(a){if(this._slave){var c=this;a.getMessageHandler().setFunctionNotFoundHandler(function(b,d,f,g){c._onFunctionNotFound(a,b,d,f,g);window.console&&window.console.debug&&window.console.debug("Handling not found function: ",arguments)})}this._masterLoadCallback&&
this._masterLoadCallback(a)};b.CibIwcMasterController.prototype._onFunctionNotFound=function(a,c,b,d,f){this.getSlave().callFunction(c,d,{success:function(c){a.sendServiceCallSuccess(b,c)},failure:function(c){a.sendServiceCallError(b,c)}})};b.CibIwcMasterController.prototype.setMasterLoadCallback=function(a){this._masterLoadCallback=a};b.CibIwcMasterController.prototype._log=function(a){window.console&&window.console.debug&&window.console.debug("CIB iwc mastercontroller ("+window.location+") ",a)};
b.CibIwcMasterController.prototype.init=function(){this._msgHandler.registerFunction("requestClientId",this._msgIdRequest.bind(this));this._msgHandler.registerFunction("disconnectMaster",this.disconnectMaster.bind(this));this._msgHandler.init();this._initClient();this._log("CIB iwc mastercontroller loaded.")};b.CibIwcMasterController.prototype._initClient=function(){null!=this.getMode()?(window.console&&window.console.info&&window.console.info("Detected slave mode: "+this.getMode()),this._slave=window.CibIwcInitSlave(),
this._slave.setInitCallback(this._slaveInitCallback),this._slave.init()):window.console&&window.console.info&&window.console.info("Running in normal mode")};b.CibIwcMasterController.prototype.setSlaveInitCallback=function(a){this._slaveInitCallback=a;this._slave&&this._slave.setInitCallback(this._slaveInitCallback)};b.CibIwcMasterController.prototype.getSlave=function(){return this._slave};b.CibIwcMasterController.prototype.sendServiceCallSuccess=function(a,c){var b=this._searchClientForPendingCall(a);
b&&b.sendServiceCallSuccess(a,c)};b.CibIwcMasterController.prototype.sendServiceCallError=function(a,c){var b=this._searchClientForPendingCall(a);b&&b.sendServiceCallError(a,c)};b.CibIwcMasterController.prototype._searchClientForPendingCall=function(a){for(var c=0;c<this._clients.length;c++){var b=this._clients[c];if(b.hasPendingServiceCall(a))return b}return null};b.CibGetMasterController=function(a){b.cibIwcMasterController||(a=new b.CibIwcMasterController(a),a.init(),b.cibIwcMasterController=a);
return b.cibIwcMasterController}})(window);
(function(b,a){b.CibIwcMasterClientDelegator=function(){this._master=this._client=this._slave=null;this._delegatedFunctions=[];this.init=function(){};this.delegateFunction=function(a,b,d){this._delegatedFunctions.push({name:a,async:b,callback:d})};this.delegate=function(a,b){this._client=b;this._slave=a;this._delegateSlaveClient();this._delegateClientSlave()};this._delegateSlaveClient=function(){a.console&&a.console.debug&&a.console.debug("Register delegated functions Slave-\x3eClient ");for(var c=
0;c<this._delegatedFunctions.length;++c){var b=this._delegatedFunctions[c];this._delegateSlaveClientFunc(b.name,b.async,b.callback)}};this._delegateSlaveClientFunc=function(a,b,d){var c=this;this._slave.registerFunction(a,function(b,f){c._callCallback(d,b,f);c._callClient(a,b)},b)};this._callClient=function(c,b){try{a.console&&a.console.debug&&a.console.debug("Calling Function Slave-\x3eClient ",c,b),this._client.callFunction(c,b,{success:function(b){a.console&&a.console.debug&&a.console.debug("Success Slave-\x3eClient ",
c,b);return b},failure:function(d){a.console&&a.console.debug&&a.console.debug("failure Slave-\x3eClient",c,b);throw d;}})}catch(d){a.console&&a.console.error&&a.console.error("Delegation failed ",d)}};this._delegateClientSlave=function(){a.console&&a.console.debug&&a.console.debug("Register delegated functions Client-\x3eSlave ");for(var c=0;c<this._delegatedFunctions.length;++c){var b=this._delegatedFunctions[c];this._delegateClientSlaveFuncAsync(b.name,b.callback)}};this._delegateClientSlaveFunc=
function(c,b){var d=this._slave;this._client.registerFunction(c,function(b,g){a.console&&a.console.debug&&a.console.debug("Calling Nonasync Function Client-\x3eSlave ",c);d.callFunction(c,b,{success:function(b){a.console&&a.console.debug&&a.console.debug("Nonasync Success Client-\x3eSlave",c,b);return b},failure:function(d){a.console&&a.console.debug&&a.console.debug("Nonasync  Outerfailure Client-\x3eSlave",c,b);throw d;}})},!1)};this._delegateClientSlaveFuncAsync=function(a,b){var c=this;this._client.registerFunction(a,
function(d,g,e){c._callCallbackAsync(b,d,g,e);c._callSlaveAsync(b,a,d,g,e)},!0)};this._callCallbackAsync=function(b,e,d,f){try{b&&b.success&&b.success(d)}catch(g){a.console&&a.console.error&&a.console.error("Callback Async call failed",g)}};this._callCallback=function(b,e,d){try{b&&b.success&&b.success(e)}catch(f){a.console&&a.console.error&&a.console.error("Callback call failed",f)}};this._callSlaveAsync=function(b,e,d,f,g){try{a.console&&a.console.debug&&a.console.debug("Calling Async Function Client-\x3eSlave ",
e);var c=this._client,k=this;this._slave.callFunction(e,f,{success:function(f){k._callCallback(b,f,g);a.console&&a.console.debug&&a.console.debug("Async Success Client-\x3eSlave",e,f);c._msgHandler.sendServiceCallSuccess(d,f)},failure:function(b){a.console&&a.console.debug&&a.console.debug("Async Failure Client-\x3eSlave",e,f);c._msgHandler.sendServiceCallFailure(d,f)}})}catch(h){a.console&&a.console.error&&a.console.error("Delegation failed",h)}}};b.CibIwcMasterBroadcastDelegator=function(b){this._master=
b;this._delegatedFunctions=[];this.init=function(){};this.delegateFunction=function(a,b,c){this._delegatedFunctions.push({name:a,async:b,callback:c})};this.delegate=function(a){this._slave=a;this._delegateSlaveMaster()};this._delegateSlaveMaster=function(){a.console&&a.console.debug&&a.console.debug("Register delegated functions Slave-\x3eClient ");for(var b=0;b<this._delegatedFunctions.length;++b){var c=this._delegatedFunctions[b];this._delegateSlaveClientFunc(c.name,c.async,c.callback)}};this._delegateSlaveClientFunc=
function(b,c,f){var d=this;this._slave.registerFunction(b,function(c,g){try{d._callCallback(f,c,g),d._callClients(b,c)}catch(h){a.console&&a.console.error&&a.console.error("Delgation failed",h)}},c)};this._callClients=function(b,c){for(var d=this._master.listMasters(),g=0;g<d.length;++g)try{this._callClient(d[g],b,c)}catch(r){a.console.error("Client #"+g+" couldnt be called.",r)}};this._callClient=function(b,c,f){try{a.console&&a.console.debug&&a.console.debug("Calling Function Slave-\x3eClient ",
c,f),b.callFunction(c,f,{success:function(b){a.console&&a.console.debug&&a.console.debug("Success Slave-\x3eClient ",c,b);return b},failure:function(b){a.console&&a.console.debug&&a.console.debug("failure Slave-\x3eClient",c,f);throw b;}})}catch(g){a.console&&a.console.error&&a.console.error("Delegation failed ",g)}};this._callCallback=function(b,c,f){try{b&&b.success&&b.success(c)}catch(g){a.console&&a.console.error&&a.console.error("Callback call failed",g)}}}})(window,window);
(function(b){b.CibIwcMessaging=function(a){this._targetWindow=null;this._functions={};this._services={};this._initcallback=this._clientId=null;this._messageType=a;this._serviceCallCounter=0;this._replies={};this._functionNotFoundHandler=this._dispatchProxy=void 0};b.CibIwcMessaging.prototype.init=function(){this._log("initing messaging");this._bindDefaultCallbacks();"function"===typeof this._initcallback&&this._initcallback()};b.CibIwcMessaging.prototype.setWindow=function(a){this._targetWindow=a};
b.CibIwcMessaging.prototype.setClientId=function(a){this._clientId=a};b.CibIwcMessaging.prototype.setInitCallback=function(a){this._initcallback=a};b.CibIwcMessaging.prototype.setFunctionNotFoundHandler=function(a){this._functionNotFoundHandler=a};b.CibIwcMessaging.prototype.setMessageType=function(a){this._messageType=a};b.CibIwcMessaging.prototype.registerFunction=function(a,b,e){if(!a)throw"No funcname id in publish function parameter.";if(!b)throw"No func found in publish function parameter, funcname: "+
a;if("function"!==typeof b)throw"Given object is not a function for: "+a+", Objecttype: "+typeof b;var c;c=e?this._services:this._functions;null!=c[a]?(c[a]=b,this._log(a+" registered again")):(this._log("Publishing function "+a+" async: "+e),c[a]=b)};b.CibIwcMessaging.prototype._bind=function(a,b){this._log("Binding: "+a);pm.bind(a,b,void 0,void 0,!0)};b.CibIwcMessaging.prototype._onFunctionCall=function(a,b,e){if(this._clientId&&this._clientId!=a.cid)this._log("Got message for another client",this,
e);else if(this._isAsync(a.name))this._invokeFuncAsync(a.name,a.parameter,e,b);else if(this._isSync(a.name))b(this._invokeFunc(a.name,a.parameter,e));else if("function"===typeof this._functionNotFoundHandler)this._handleNonFoundFunction(a.name,a.parameter,e,b);else throw"Function "+a.name+" not found, requested by "+a.cid+" !";};b.CibIwcMessaging.prototype._invokeFunc=function(a,b,e){this._log("invoke func async",a,b);if(a)return this._log("Received msg for ",a," with data ",b),this._functions[a](b,
e);throw"Received msg but cant do anything with it";};b.CibIwcMessaging.prototype._invokeFuncAsync=function(a,b,e,d){window.console&&window.console.debug&&window.console.debug("invoke func async ",a,b);if(a)this._log("Received msg for "+a+" with data "+JSON.stringify(b)),d=this._createServiceCallback(a,d),this._services[a](d,b,e);else throw"Received msg but cant do anything with it";};b.CibIwcMessaging.prototype._handleNonFoundFunction=function(a,b,e,d){d=this._createServiceCallback(a,d);this._log("_handleNonFoundFunction for "+
a+" with data "+JSON.stringify(b)+" callbackid "+d);this._functionNotFoundHandler(a,d,b,e)};b.CibIwcMessaging.prototype._createServiceCallback=function(a,b){a=this._clientId+"_"+a+"_"+this._serviceCallCounter++;this._replies[a]=b;return a};b.CibIwcMessaging.prototype.hasPendingServiceCall=function(a){return"function"===typeof this._replies[a]};b.CibIwcMessaging.prototype.call=function(a,b,e){this._callFunction(a,b,e)};b.CibIwcMessaging.prototype.sendServiceCallSuccess=function(a,b){this._sendServiceCallResult(a,
b,!1)};b.CibIwcMessaging.prototype.sendServiceCallError=function(a,b){this._sendServiceCallResult(a,b,!0)};b.CibIwcMessaging.prototype._sendServiceCallResult=function(a,b,e){var c=this._replies[a];if(!c)throw"No callback found for "+a+" to send";c(b,e);delete this._replies[a]};b.CibIwcMessaging.prototype._callFunction=function(a,b,e){this._send(this._messageType,{cid:this._clientId,name:a,parameter:b},e)};b.CibIwcMessaging.prototype._send=function(a,b,e){var c=this;pm({target:this._targetWindow,type:a,
data:null!=b?b:{},success:function(a){c._onSendSuccess(a,e)},error:function(a){c._onSendFailure(a,e)}})};b.CibIwcMessaging.prototype._onSendSuccess=function(a,b){a&&a.async&&a.callbackId||b&&"function"===typeof b.success&&b.success(a)};b.CibIwcMessaging.prototype._onSendFailure=function(a,b){b&&"function"===typeof b.failure?b.failure(a):window.console&&window.console.error&&window.console.error("Error received but no handler available:",a)};b.CibIwcMessaging.prototype.disconnect=function(){this._log("Disconnecting "+
this._messageType);this._messageType&&pm.unbind(this._messageType,this._dispatchProxy)};b.CibIwcMessaging.prototype._log=function(a){if(window.console&&window.console.debug){var b=Array.prototype.slice.call(arguments);b.unshift("CibIwcMessaging ("+window.location+"): ");window.console.debug.apply(window.console,b)}};b.CibIwcMessaging.prototype._bindDefaultCallbacks=function(){this._dispatchProxy=this._onFunctionCall.bind(this);this._bind(this._messageType,this._dispatchProxy)};b.CibIwcMessaging.prototype._isAsync=
function(a){return"function"===typeof this._services[a]};b.CibIwcMessaging.prototype._isSync=function(a){return"function"===typeof this._functions[a]}})(window);var NO_JQUERY={};
(function(b,a,c){if(!("console"in b)){var e=b.console={};e.log=e.warn=e.error=e.debug=function(){}}a===NO_JQUERY&&(a={fn:{},extend:function(){for(var a=arguments[0],b=1,c=arguments.length;b<c;b++){var d=arguments[b],e;for(e in d)a[e]=d[e]}return a}});a.pm=function(){b.console.log("usage: \nto send:    wrapper.pm(options)\nto receive: wrapper.pm.bind(type, fn, [origin])");return this};a.pm=b.pm=function(a){d.send(a)};a.pm.bind=b.pm.bind=function(a,b,c,e,h){d.bind(a,b,c,e,!0===h)};a.pm.unbind=b.pm.unbind=
function(a,b){d.unbind(a,b)};a.pm.origin=b.pm.origin=null;a.pm.poll=b.pm.poll=200;var d={send:function(c){try{var f=a.extend({},d.defaults,c),e=f.target;if(f.target)if(f.type){var k={data:f.data,type:f.type};f.success&&(k.callback=d._callback(f.success));f.error&&(k.errback=d._callback(f.error));if("postMessage"in e&&!f.hash){d._bind();try{e.postMessage(JSON.stringify(k),f.origin||"*")}catch(h){throw b.console&&b.console.error&&b.console.error("postmessage failed",h),h;}}else d.hash._bind(),d.hash.send(f,
k)}else b.console.warn("postmessage type required",c);else b.console.warn("postmessage target window required",c)}catch(h){throw b.console&&b.console.info&&b.console.error("postmessage send error",h),h;}},bind:function(a,b,c,e,h){d._replyBind(a,b,c,e,h)},_replyBind:function(c,e,r,k,h){"postMessage"in b&&!k?d._bind():d.hash._bind();k=d.data("listeners.postmessage");k||(k={},d.data("listeners.postmessage",k));var f=k[c];f||(f=[],k[c]=f);f.push({fn:e,callback:h,origin:r||a.pm.origin})},unbind:function(a,
b){var c=d.data("listeners.postmessage");if(c)if(a)if(b){var f=c[a];if(f){for(var e=[],g=0,n=f.length;g<n;g++){var l=f[g];l.fn!==b&&e.push(l)}c[a]=e}}else delete c[a];else for(g in c)delete c[g]},data:function(a,b){return b===c?d._data[a]:d._data[a]=b},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var a=[],b=0;32>b;b++)a[b]=d._CHARS[0|32*Math.random()];return a.join("")},_callback:function(a){var b=d.data("callbacks.postmessage");
b||(b={},d.data("callbacks.postmessage",b));var c=d._random();b[c]=a;return c},_bind:function(){d.data("listening.postmessage")||(b.addEventListener?b.addEventListener("message",d._dispatch,!1):b.attachEvent&&b.attachEvent("onmessage",d._dispatch),d.data("listening.postmessage",1))},_dispatch:function(a){try{var c={};try{c=JSON.parse(a.data)}catch(l){a.data.source&&"vue-devtools-backend"===a.data.source||b.console&&b.console.info&&b.console.warn("postmessage data invalid json: ",a,l);return}if(c.type){var f=
(d.data("callbacks.postmessage")||{})[c.type];if(f)f(c.data);else for(var e=(d.data("listeners.postmessage")||{})[c.type]||[],f=0,h=e.length;f<h;f++){var p=e[f];if(p.origin&&"*"!==p.origin&&a.origin!==p.origin)b.console.warn("postmessage message origin mismatch",a.origin,p.origin),c.errback&&d.send({target:a.source,data:{message:"postmessage origin mismatch",origin:[a.origin,p.origin]},type:c.errback});else{var n=function(b,f){c.callback&&d.send({target:a.source,data:b,type:f?c.errback:c.callback})};
try{p.callback?p.fn(c.data,n,a):n(p.fn(c.data,a),!1)}catch(l){if(l.stack&&(b.console&&b.console.error(l.stack),l=l.message),c.errback)n(l,!0);else throw l;}}}}else b.console&&b.console.info&&b.console.warn("postmessage message type required")}catch(l){throw l;}},hash:{send:function(a,c){var e=a.target;if(a=a.url){a=d.hash._url(a);var f,h=d.hash._url(b.location.href);if(b==e.parent)f="parent";else try{for(var g=b.parent,n=0,l=g.frames.length;n<l;n++)if(g.frames[n]==b){f=n;break}}catch(t){f=b.name}null==
f?b.console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list"):(c={"x-requested-with":"postmessage",source:{name:f,url:h},postmessage:c},f="#x-postmessage-id\x3d"+d._random(),e.location=a+f+encodeURIComponent(JSON.stringify(c)))}else b.console.warn("postmessage target window url is required")},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:50,_bind:function(){d.data("polling.postmessage")||(setInterval(function(){var a=
""+b.location.hash,c=d.hash._regex.exec(a);c&&(c=c[1],d.hash._last!==c&&(d.hash._last=c,d.hash._dispatch(a.substring(d.hash._regex_len))))},a.pm.poll||200),d.data("polling.postmessage",1))},_dispatch:function(a){if(a){try{if(a=JSON.parse(decodeURIComponent(a)),!("postmessage"===a["x-requested-with"]&&a.source&&null!=a.source.name&&a.source.url&&a.postmessage))return}catch(t){return}var c=a.postmessage,e=(d.data("callbacks.postmessage")||{})[c.type];if(e)e(c.data);else{var f;f="parent"===a.source.name?
b.parent:b.frames[a.source.name];for(var e=(d.data("listeners.postmessage")||{})[c.type]||[],h=0,p=e.length;h<p;h++){var n=e[h];if(n.origin){var l=/https?\:\/\/[^\/]*/.exec(a.source.url)[0];if("*"!==n.origin&&l!==n.origin){b.console.warn("postmessage message origin mismatch",l,n.origin);c.errback&&d.send({target:f,data:{message:"postmessage origin mismatch",origin:[l,n.origin]},type:c.errback,hash:!0,url:a.source.url});continue}}l=function(b){c.callback&&d.send({target:f,data:b,type:c.callback,hash:!0,
url:a.source.url})};try{n.callback?n.fn(c.data,l):l(n.fn(c.data))}catch(t){if(c.errback)d.send({target:f,data:t,type:c.errback,hash:!0,url:a.source.url});else throw t;}}}}},_url:function(a){return(""+a).replace(/#.*$/,"")}}};a.extend(d,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})})(this,"undefined"===typeof jQuery?NO_JQUERY:jQuery);"JSON"in window&&window.JSON||(JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function a(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=r[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(b,d){var e,h,p=f,q,m=d[b];m&&"object"===typeof m&&"function"===typeof m.toJSON&&(m=m.toJSON(b));"function"===typeof k&&(m=k.call(d,b,m));switch(typeof m){case "string":return a(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);
case "object":if(!m)return"null";f+=g;q=[];if("[object Array]"===Object.prototype.toString.apply(m)){h=m.length;for(b=0;b<h;b+=1)q[b]=c(b,m)||"null";d=0===q.length?"[]":f?"[\n"+f+q.join(",\n"+f)+"\n"+p+"]":"["+q.join(",")+"]";f=p;return d}if(k&&"object"===typeof k)for(h=k.length,b=0;b<h;b+=1)e=k[b],"string"===typeof e&&(d=c(e,m))&&q.push(a(e)+(f?": ":":")+d);else for(e in m)Object.hasOwnProperty.call(m,e)&&(d=c(e,m))&&q.push(a(e)+(f?": ":":")+d);d=0===q.length?"{}":f?"{\n"+f+q.join(",\n"+f)+"\n"+
p+"}":"{"+q.join(",")+"}";f=p;return d}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,d){var e;g=f="";if("number"===typeof d)for(e=0;e<d;e+=1)g+=" ";else"string"===typeof d&&(g=d);if((k=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return a=eval("("+a+")"),"function"===typeof b?c({"":a},""):a;throw new SyntaxError("JSON.parse");})})();
(function(b){b.CibApplicationFunctions=function(a){this._getMessageing=a;this.getMessageing=function(){return this._getMessageing};this._closeCallbacks={};this.openApplication=function(a,b,c,g,r){a={url:a,name:b,focus:c,startParams:r};this.getMessageing().callFunction("openApplication",a,g)};this.closeApplication=function(a,b){a={id:a};this.getMessageing().callFunction("closeApplication",a,b)};this.registerCloseNotification=function(a,b){this._closeCallbacks[a]=b};var b=this;this._getMessageing.registerFunction("closeNotification",
function(a){if(b._closeCallbacks[a.appId])b._closeCallbacks[a.appId]()})}})(window);
(function(b){b.CibCommonFunctions=function(a){this._client=a;this.getClient=function(){return this._client};this.registerLockCallback=function(a){this.getClient().registerFunction("lock",a)};this.registerUnlockCallback=function(a){this.getClient().registerFunction("unlock",a)};this.registerLogoutCallback=function(a){this.getClient().registerFunction("logout",a)};this.registerDoResizeCallback=function(a){this.getClient().registerFunction("resize",a)};this.registerShowMessageCallback=function(a){this.getClient().registerFunction("showMessage",
a)};this.registerPrintCallback=function(a){this.getClient().registerFunction("print",a)};this.getStartParameters=function(a){var b=a;!a.success&&a.start&&(window.console&&window.console.warn("Callback has no success method, doing fallback.",a),b={success:function(b){a.start(b)},failure:function(b){a.fail(b)}});this.getClient().callFunction("getStartParameters",{},b)};this.setBusy=function(a){a={isBusy:a};this.getClient().callFunction("setBusy",a,null)};this.fireDataDirty=function(a,b,d){a={isDirty:a,
message:b,messageId:d};this.getClient().callFunction("fireDataDirty",a,null)};this.terminate=function(a,b,d){a={code:a,data:b,errorDescription:d};this.getClient().callFunction("terminate",a,null)};this.openApplication=function(a){this.getClient().callFunction("openApplication",a,null)}}})(window);
(function(b){b.CibInfrastructureFunctions=function(a){this._messageing=a;this.getMessageing=function(){return this._messageing};this.getVersionInfo=function(a,b){this.getMessageing().callFunction("getVersionInfo",a,b)};this.findClient=function(a,b){this.getMessageing().callFunction("findClient",a,b)}}})(window);
(function(b){b.CibIwcSlave=function(){this._functionHandler=new b.CibIwcMessaging("cib.iwc.functioncall");this._masterHandler=new b.CibIwcMessaging("cib.iwc.technicalcall");this._integratorInfo=this._targetWindow=void 0;this._initialized=!1;this._serverSettings={};this._initError=null;this._versionInfo={version:"0.1"}};b.CibIwcSlave.prototype.init=function(){window.console&&window.console.debug&&window.console.debug("Init of CIB iwc Slave start");try{this._targetWindow=this._selectTarget(),this._functionHandler.setWindow(this._targetWindow),
this._masterHandler.setWindow(this._targetWindow),this._masterHandler.init(),this._connectToServer()}catch(a){throw window.console&&window.console.debug&&window.console.debug("Init of CIB iwc Slave failed",a),a;}};b.CibIwcSlave.prototype.setInitCallback=function(a){window.console&&window.console.debug&&window.console.debug("Setting initcallback in CIB iwc slave",a);this._initcallback=a;this._initialized&&(window.console&&window.console.debug&&window.console.debug("Already loaded, calling initcallback directly"),
this._callInitCallback(this._serverSettings,this._initError))};b.CibIwcSlave.prototype.setIntegratorInfo=function(a){this._integratorInfo=a};b.CibIwcSlave.prototype.getVersionInfo=function(){return{"Client API":this._integratorInfo,"CIB iwc slave":this._versionInfo}};b.CibIwcSlave.prototype.callFunction=function(a,b,e){this._functionHandler.call(a,b,e)};b.CibIwcSlave.prototype.registerFunction=function(a,b,e){this._functionHandler.registerFunction(a,b,e)};b.CibIwcSlave.prototype.sendServiceCallError=
function(a,b){this._functionHandler.sendServiceCallError(a,b)};b.CibIwcSlave.prototype.sendServiceCallSuccess=function(a,b){this._functionHandler.sendServiceCallSuccess(a,b)};b.CibIwcSlave.prototype._startUp=function(a,b){this._log(".. connection done, startup: "+JSON.stringify(a)+" / "+b);this._initialized?this._log("Already initialized, but got _startup"):(a&&(this._serverSettings=a,this._functionHandler.setMessageType(a.channel),this._functionHandler.setClientId(a.clientId),this._functionHandler.init(),
this._masterHandler.setClientId(a.clientId),this._functionHandler.call("iwc.onSlaveLoaded")),b&&(this._initError=b),this._callInitCallback(a,b),this._initialized=!0)};b.CibIwcSlave.prototype._callInitCallback=function(a,b){this._initcallback?(window.console&&window.console.debug&&window.console.debug("CIB iwc slave: Calling initcallback...."),a&&this._initcallback.success&&this._initcallback.success(a),b&&this._initcallback.failure&&this._initcallback.failure(b)):window.console&&window.console.debug&&
window.console.debug("CIB iwc slave: No init callback found.")};b.CibIwcSlave.prototype._connectToServer=function(){this._log("Connecting to server...");var a=this,b=function(){a._log("Requesting my client id.");a._masterHandler.call("requestClientId",a.getVersionInfo(),{success:function(b){null==b?window.console&&window.console.debug&&window.console.debug("serverSettings is null - cannot startup"):a._startUp(null!=b?b:{},null)},failure:function(b){a._startUp(null,null!=b?b:{})}})};"complete"===document.readyState?
b():window.addEventListener("load",b)};b.CibIwcSlave.prototype._log=function(a){window.console&&window.console.debug&&window.console.debug("IWCSlave ("+window.location+"): "+a)};b.CibIwcSlave.prototype._selectTarget=function(){var a=window,b="";window.opener&&window.opener!=window.self?(a=window.opener,b="Using window opener as target"):window.parent&&(a=window.parent,b="Using window.parent as target");this._log(b);return a};b.CibIwcSlave.prototype.disconnect=function(){var a=this;this._masterHandler.call("disconnectMaster",
this._functionHandler._clientId,{success:function(){window.console&&window.console.info("Successfully disconnected master "+a._functionHandler._clientId);this._functionHandler.disconnect();this._masterHandler.disconnect();this._integratorInfo=this._targetWindow=void 0;this._initialized=!1;this._serverSettings={};this._initError=null},failure:function(a){throw a;}})};b.CibSlaveFactory||(window.console.info&&window.console.info("No SlaveFactory found, registering default one."),b.CibSlaveFactory=function(){window.console&&
window.console.info&&window.console.info("Creating default CibIWcSlave.");return new b.CibIwcSlave});b.CibIwcInitSlave=function(){return b.CibSlaveFactory()}})(window);